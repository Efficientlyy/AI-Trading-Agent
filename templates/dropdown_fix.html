<\!-- Dropdown CSS fix -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/dropdown_fix.css') }}">
<script src="{{ url_for('static', filename='js/dropdown_fix.js') }}"></script>

<style>
    /* Critical inline styles that will apply immediately */
    .dropdown-menu {
        display: none \!important;
        position: absolute \!important;
        background-color: #ffffff \!important;
        min-width: 160px \!important;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2) \!important;
        z-index: 9999 \!important;
        border-radius: 4px \!important;
        border: 1px solid #ddd \!important;
        padding: 8px 0 \!important;
        overflow: visible \!important;
    }

    .dropdown-menu.show {
        display: block \!important;
        visibility: visible \!important;
        opacity: 1 \!important;
        pointer-events: auto \!important;
    }

    .user-dropdown {
        position: absolute \!important;
        top: 100% \!important;
        right: 0 \!important;
        min-width: 200px \!important;
        z-index: 9999 \!important;
    }
</style>

<script>
    // Run this immediately to force the dropdown styling to apply
    (function() {
        document.addEventListener('DOMContentLoaded', function() {
            // Add timestamp to overcome caching
            const timestamp = new Date().getTime();
            
            // Update CSS links
            document.querySelectorAll('link[rel="stylesheet"]').forEach(function(link) {
                const href = link.getAttribute('href');
                if (href && href.includes('/static/')) {
                    // Remove existing timestamps
                    const cleanHref = href.split('?')[0];
                    link.setAttribute('href', cleanHref + '?v=' + timestamp);
                }
            });
            
            // Update script links
            document.querySelectorAll('script[src]').forEach(function(script) {
                const src = script.getAttribute('src');
                if (src && src.includes('/static/')) {
                    // Remove existing timestamps
                    const cleanSrc = src.split('?')[0];
                    script.setAttribute('src', cleanSrc + '?v=' + timestamp);
                }
            });
            
            // Directly fix any visible dropdowns
            setTimeout(function() {
                document.querySelectorAll('.dropdown-menu').forEach(function(menu) {
                    menu.style.zIndex = '9999';
                });
            }, 100);
        });
    })();
</script>


