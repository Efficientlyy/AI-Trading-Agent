<div id="apiKeysPanel" class="api-keys-panel">
    <div class="panel-header">
        <h2>API Key Management</h2>
        <button id="closeApiKeys" class="close-panel">
            <i data-feather="x"></i>
        </button>
    </div>
    
    <div class="panel-content">
        <div class="api-keys-section">
            <div class="section-header">
                <h3>Available Exchange Keys</h3>
                <button id="refreshApiKeys" class="refresh-btn" title="Refresh API Keys">
                    <i data-feather="refresh-cw"></i>
                </button>
            </div>
            
            <div class="api-keys-list" id="apiKeysList">
                <!-- API keys will be loaded here dynamically -->
                <div class="loading-indicator">
                    <div class="spinner"></div>
                    <p>Loading API keys...</p>
                </div>
            </div>
        </div>
        
        <div class="api-keys-section">
            <div class="section-header">
                <h3>Add New API Key</h3>
            </div>
            
            <form id="addApiKeyForm" class="api-key-form">
                <div class="form-group">
                    <label for="exchangeSelect">Exchange</label>
                    <select id="exchangeSelect" name="exchange" required>
                        <option value="" disabled selected>Select Exchange</option>
                        <option value="binance">Binance</option>
                        <option value="coinbase">Coinbase</option>
                        <option value="kraken">Kraken</option>
                        <option value="ftx">FTX</option>
                        <option value="kucoin">KuCoin</option>
                        <option value="twitter">Twitter</option>
                        <option value="newsapi">News API</option>
                        <option value="cryptocompare">CryptoCompare</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="apiKey">API Key</label>
                    <input type="text" id="apiKey" name="key" placeholder="Enter API key" required>
                </div>
                
                <div class="form-group">
                    <label for="apiSecret">API Secret</label>
                    <input type="password" id="apiSecret" name="secret" placeholder="Enter API secret" required>
                </div>
                
                <div class="form-group" id="passphraseGroup">
                    <label for="apiPassphrase">Passphrase (if required)</label>
                    <input type="password" id="apiPassphrase" name="passphrase" placeholder="Enter passphrase">
                </div>
                
                <div class="form-group">
                    <label for="apiDescription">Description</label>
                    <input type="text" id="apiDescription" name="description" placeholder="Main account, Trading only, etc.">
                </div>
                
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="isTestnet" name="is_testnet">
                    <label for="isTestnet">Testnet/Sandbox Account</label>
                </div>
                
                <div class="form-actions">
                    <button type="button" id="validateApiKey" class="validate-btn">Validate</button>
                    <button type="submit" class="submit-btn">Add API Key</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- API Key Detail Modal -->
    <div id="apiKeyDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalExchangeTitle">API Key Details</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="apiKeyDetailContent">
                <!-- API key details will be inserted here -->
            </div>
            <div class="modal-footer">
                <button id="deleteApiKey" class="delete-btn">Delete</button>
                <button class="close-btn">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="apiKeysOverlay" class="panel-overlay"></div>

<!-- Template for API Key Item -->
<template id="apiKeyItemTemplate">
    <div class="api-key-item" data-exchange="{exchange}">
        <div class="api-key-info">
            <div class="api-key-exchange">
                <i data-feather="{icon}"></i>
                <span>{displayName}</span>
                <span class="testnet-badge" style="display: {testnetDisplay}">TESTNET</span>
            </div>
            <div class="api-key-details">
                <span class="api-key-description">{description}</span>
                <span class="api-key-masked">{maskedKey}</span>
            </div>
        </div>
        <div class="api-key-actions">
            <button class="details-btn" title="View Details">
                <i data-feather="eye"></i>
            </button>
            <button class="validate-btn" title="Validate API Key">
                <i data-feather="check-circle"></i>
            </button>
        </div>
    </div>
</template>